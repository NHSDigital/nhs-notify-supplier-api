openapi: 3.0.3
info:
  description: |
    API for communication suppliers to integrate with NHS Notify.

    This specification represents the in-development 'next' version of the API schema
    and should be treated as unstable.
  title: NHS Notify Supplier API
  version: next
servers:
- description: Local development server
  url: http://127.0.0.1:3000
- description: Public sandbox
  url: https://sandbox-server.nhs.uk/nhs-notify-supplier-api
tags:
- description: ""
  name: letter
- description: ""
  name: mi
- description: ""
  name: data
paths:
  /letters:
    get:
      description: The key use of this endpoint is to query letters which are ready
        to be printed
      operationId: listLetters
      parameters:
      - description: "Unique request identifier, in the format of a GUID"
        explode: false
        in: header
        name: X-Request-ID
        required: true
        schema:
          example: dcb9c8dc-c2f4-4d5f-8674-a2e913e040b2
          type: string
        style: simple
      - description: |-
          An optional ID which you can use to track transactions across multiple systems. It can take any value, but we recommend avoiding `.` characters. If not provided in the request, NHS Notify will default to a system generated ID in its place.
          The ID will be returned in a response header.
        explode: false
        in: header
        name: X-Correlation-ID
        required: false
        schema:
          example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA
          type: string
        style: simple
      - description: The maximum number of items to return in a single request
        explode: true
        in: query
        name: limit
        required: false
        schema:
          example: 100
          type: number
        style: form
      responses:
        "200":
          content:
            application/vnd.api+json:
              examples:
                get-letters:
                  value:
                    data:
                    - attributes:
                        specificationId: 2WL5eYSWGzCHlGmzNxuqVusPxDg
                        status: PENDING
                      id: 2WL5eYSWGzCHlGmzNxuqVusPxDg
                      type: Letter
              schema:
                $ref: "#/components/schemas/listLetters_200_response"
          description: List of letters to process
        "404":
          content:
            application/vnd.api+json:
              examples:
                error-not-found:
                  value:
                    errors:
                    - code: NOTIFY_RESOURCE_NOT_FOUND
                      detail: No resource found with that ID
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "404"
                      title: Resource not found
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: Resource not found
        "429":
          content:
            application/vnd.api+json:
              examples:
                error-too-many-requests:
                  value:
                    errors:
                    - code: NOTIFY_QUOTA
                      detail: You have made too many requests. Please try again later.
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "429"
                      title: Too many requests
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: Too many requests
        "500":
          content:
            application/vnd.api+json:
              examples:
                error-server-error:
                  value:
                    errors:
                    - code: NOTIFY_INTERNAL_SERVER_ERROR
                      detail: "An unexpected error occurred, please contact support"
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "500"
                      title: Internal Server Error
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: Server error
      summary: Get a list of PENDING letters
      tags:
      - letter
      x-eov-operation-handler: controllers/LetterController
    post:
      operationId: postLetters
      parameters:
      - description: "Unique request identifier, in the format of a GUID"
        explode: false
        in: header
        name: X-Request-ID
        required: true
        schema:
          example: dcb9c8dc-c2f4-4d5f-8674-a2e913e040b2
          type: string
        style: simple
      - description: |-
          An optional ID which you can use to track transactions across multiple systems. It can take any value, but we recommend avoiding `.` characters. If not provided in the request, NHS Notify will default to a system generated ID in its place.
          The ID will be returned in a response header.
        explode: false
        in: header
        name: X-Correlation-ID
        required: false
        schema:
          example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA
          type: string
        style: simple
      requestBody:
        content:
          application/vnd.api+json:
            examples:
              post-letter-request:
                value:
                  data:
                  - attributes:
                      reasonCode: 100
                      reasonText: failed validation
                      specificationId: 2WL5eYSWGzCHlGmzNxuqVusPxDg
                      status: REJECTED
                    id: 2WL5eYSWGzCHlGmzNxuqVusPxDg
                    type: Letter
            schema:
              $ref: "#/components/schemas/postLetters_request"
        required: true
      responses:
        "200":
          content:
            application/vnd.api+json:
              examples:
                post-letters-responses:
                  value:
                    data:
                    - attributes:
                        reasonCode: 100
                        reasonText: failed validation
                        specificationId: 2WL5eYSWGzCHlGmzNxuqVusPxDg
                        status: REJECTED
                      id: 2WL5eYSWGzCHlGmzNxuqVusPxDg
                      type: Letter
              schema:
                $ref: "#/components/schemas/listLetters_200_response"
          description: Letter Resources Updated successfully
        "404":
          content:
            application/vnd.api+json:
              examples:
                error-not-found:
                  value:
                    errors:
                    - code: NOTIFY_RESOURCE_NOT_FOUND
                      detail: No resource found with that ID
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "404"
                      title: Resource not found
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: Resource not found
        "429":
          content:
            application/vnd.api+json:
              examples:
                error-too-many-requests:
                  value:
                    errors:
                    - code: NOTIFY_QUOTA
                      detail: You have made too many requests. Please try again later.
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "429"
                      title: Too many requests
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: Too many requests
        "500":
          content:
            application/vnd.api+json:
              examples:
                error-server-error:
                  value:
                    errors:
                    - code: NOTIFY_INTERNAL_SERVER_ERROR
                      detail: "An unexpected error occurred, please contact support"
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "500"
                      title: Internal Server Error
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: Server error
      summary: Update the status of multiple letters
      tags:
      - letter
      x-eov-operation-handler: controllers/LetterController
  /letters/{id}:
    get:
      description: Get details the status of a letter.
      operationId: getLetterStatus
      parameters:
      - description: "Unique request identifier, in the format of a GUID"
        explode: false
        in: header
        name: X-Request-ID
        required: true
        schema:
          example: dcb9c8dc-c2f4-4d5f-8674-a2e913e040b2
          type: string
        style: simple
      - description: |-
          An optional ID which you can use to track transactions across multiple systems. It can take any value, but we recommend avoiding `.` characters. If not provided in the request, NHS Notify will default to a system generated ID in its place.
          The ID will be returned in a response header.
        explode: false
        in: header
        name: X-Correlation-ID
        required: false
        schema:
          example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA
          type: string
        style: simple
      - description: Unique identifier of this resource
        explode: false
        in: path
        name: id
        required: true
        schema:
          example: 24L5eYSWGzCHlGmzNxuqVusPxDg
          type: string
        style: simple
      responses:
        "200":
          content:
            application/vnd.api+json:
              examples:
                get-letters:
                  value:
                    data:
                      attributes:
                        reasonCode: 100
                        reasonText: failed validation
                        specificationId: 2WL5eYSWGzCHlGmzNxuqVusPxDg
                        status: REJECTED
                      id: 2WL5eYSWGzCHlGmzNxuqVusPxDg
                      type: Letter
              schema:
                $ref: "#/components/schemas/getLetterStatus_200_response"
          description: Letter status
        "404":
          content:
            application/vnd.api+json:
              examples:
                error-not-found:
                  value:
                    errors:
                    - code: NOTIFY_RESOURCE_NOT_FOUND
                      detail: No resource found with that ID
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "404"
                      title: Resource not found
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: Resource not found
        "429":
          content:
            application/vnd.api+json:
              examples:
                error-too-many-requests:
                  value:
                    errors:
                    - code: NOTIFY_QUOTA
                      detail: You have made too many requests. Please try again later.
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "429"
                      title: Too many requests
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: Too many requests
        "500":
          content:
            application/vnd.api+json:
              examples:
                error-server-error:
                  value:
                    errors:
                    - code: NOTIFY_INTERNAL_SERVER_ERROR
                      detail: "An unexpected error occurred, please contact support"
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "500"
                      title: Internal Server Error
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: Server error
      summary: Retrieve the status of a letter
      tags:
      - letter
      x-eov-operation-handler: controllers/LetterController
    patch:
      description: Update the status of a letter by providing the new status in the
        request body.
      operationId: patchLetters
      parameters:
      - description: "Unique request identifier, in the format of a GUID"
        explode: false
        in: header
        name: X-Request-ID
        required: true
        schema:
          example: dcb9c8dc-c2f4-4d5f-8674-a2e913e040b2
          type: string
        style: simple
      - description: |-
          An optional ID which you can use to track transactions across multiple systems. It can take any value, but we recommend avoiding `.` characters. If not provided in the request, NHS Notify will default to a system generated ID in its place.
          The ID will be returned in a response header.
        explode: false
        in: header
        name: X-Correlation-ID
        required: false
        schema:
          example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA
          type: string
        style: simple
      - description: Unique identifier of this resource
        explode: false
        in: path
        name: id
        required: true
        schema:
          example: 24L5eYSWGzCHlGmzNxuqVusPxDg
          type: string
        style: simple
      requestBody:
        content:
          application/vnd.api+json:
            examples:
              patch-letter-request:
                value:
                  data:
                    attributes:
                      reasonCode: 100
                      reasonText: failed validation
                      specificationId: 2WL5eYSWGzCHlGmzNxuqVusPxDg
                      status: REJECTED
                    id: 2WL5eYSWGzCHlGmzNxuqVusPxDg
                    type: Letter
            schema:
              $ref: "#/components/schemas/patchLetters_request"
        required: true
      responses:
        "200":
          content:
            application/vnd.api+json:
              examples:
                patch_letter-response:
                  value:
                    data:
                      attributes:
                        reasonCode: 100
                        reasonText: failed validation
                        specificationId: 2WL5eYSWGzCHlGmzNxuqVusPxDg
                        status: REJECTED
                      id: 2WL5eYSWGzCHlGmzNxuqVusPxDg
                      type: Letter
              schema:
                $ref: "#/components/schemas/getLetterStatus_200_response"
          description: Letter resource updated successfully
        "400":
          content:
            application/vnd.api+json:
              examples:
                error-bad-request:
                  value:
                    errors:
                    - code: NOTIFY_INVALID_REQUEST
                      detail: "Invalid request, please refer to the API specifications"
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "400"
                      title: Invalid request
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: "Bad request, invalid input data"
        "404":
          content:
            application/vnd.api+json:
              examples:
                error-not-found:
                  value:
                    errors:
                    - code: NOTIFY_RESOURCE_NOT_FOUND
                      detail: No resource found with that ID
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "404"
                      title: Resource not found
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: Resource not found
        "429":
          content:
            application/vnd.api+json:
              examples:
                error-too-many-requests:
                  value:
                    errors:
                    - code: NOTIFY_QUOTA
                      detail: You have made too many requests. Please try again later.
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "429"
                      title: Too many requests
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: Too many requests
        "500":
          content:
            application/vnd.api+json:
              examples:
                error-server-error:
                  value:
                    errors:
                    - code: NOTIFY_INTERNAL_SERVER_ERROR
                      detail: "An unexpected error occurred, please contact support"
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "500"
                      title: Internal Server Error
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: Server error
      summary: Update the status of a letter
      tags:
      - letter
      x-eov-operation-handler: controllers/LetterController
  /letters/{id}/data:
    get:
      operationId: getDataId
      parameters:
      - description: Unique identifier of this resource
        explode: false
        in: path
        name: id
        required: true
        schema:
          example: 24L5eYSWGzCHlGmzNxuqVusPxDg
          type: string
        style: simple
      - description: "Unique request identifier, in the format of a GUID"
        explode: false
        in: header
        name: X-Request-ID
        required: true
        schema:
          example: dcb9c8dc-c2f4-4d5f-8674-a2e913e040b2
          type: string
        style: simple
      - description: |-
          An optional ID which you can use to track transactions across multiple systems. It can take any value, but we recommend avoiding `.` characters. If not provided in the request, NHS Notify will default to a system generated ID in its place.
          The ID will be returned in a response header.
        explode: false
        in: header
        name: X-Correlation-ID
        required: false
        schema:
          example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA
          type: string
        style: simple
      responses:
        "303":
          description: See Other
          headers:
            Location:
              description: The signed S3 URL of the data file to download
              example: https://examples3bucket.com/filelocation
              explode: false
              schema:
                type: string
              style: simple
        "404":
          content:
            application/vnd.api+json:
              examples:
                error-not-found:
                  value:
                    errors:
                    - code: NOTIFY_RESOURCE_NOT_FOUND
                      detail: No resource found with that ID
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "404"
                      title: Resource not found
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: Resource not found
        "429":
          content:
            application/vnd.api+json:
              examples:
                error-too-many-requests:
                  value:
                    errors:
                    - code: NOTIFY_QUOTA
                      detail: You have made too many requests. Please try again later.
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "429"
                      title: Too many requests
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: Too many requests
        "500":
          content:
            application/vnd.api+json:
              examples:
                error-server-error:
                  value:
                    errors:
                    - code: NOTIFY_INTERNAL_SERVER_ERROR
                      detail: "An unexpected error occurred, please contact support"
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "500"
                      title: Internal Server Error
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: Server error
      summary: Fetch a data file
      tags:
      - data
      x-eov-operation-handler: controllers/DataController
    head:
      operationId: headDataId
      parameters:
      - description: Unique identifier of this resource
        explode: false
        in: path
        name: id
        required: true
        schema:
          example: 24L5eYSWGzCHlGmzNxuqVusPxDg
          type: string
        style: simple
      - description: "Unique request identifier, in the format of a GUID"
        explode: false
        in: header
        name: X-Request-ID
        required: true
        schema:
          example: dcb9c8dc-c2f4-4d5f-8674-a2e913e040b2
          type: string
        style: simple
      - description: |-
          An optional ID which you can use to track transactions across multiple systems. It can take any value, but we recommend avoiding `.` characters. If not provided in the request, NHS Notify will default to a system generated ID in its place.
          The ID will be returned in a response header.
        explode: false
        in: header
        name: X-Correlation-ID
        required: false
        schema:
          example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA
          type: string
        style: simple
      responses:
        "200":
          description: OK
      summary: Check for the existence of a data file
      tags:
      - data
      x-eov-operation-handler: controllers/DataController
  /mi:
    post:
      operationId: createMI
      parameters:
      - description: "Unique request identifier, in the format of a GUID"
        explode: false
        in: header
        name: X-Request-ID
        required: true
        schema:
          example: dcb9c8dc-c2f4-4d5f-8674-a2e913e040b2
          type: string
        style: simple
      - description: |-
          An optional ID which you can use to track transactions across multiple systems. It can take any value, but we recommend avoiding `.` characters. If not provided in the request, NHS Notify will default to a system generated ID in its place.
          The ID will be returned in a response header.
        explode: false
        in: header
        name: X-Correlation-ID
        required: false
        schema:
          example: 11C46F5F-CDEF-4865-94B2-0EE0EDCC26DA
          type: string
        style: simple
      requestBody:
        content:
          application/vnd.api+json:
            examples:
              create-mi-request:
                value:
                  data:
                    attributes:
                      cost: 10.25
                      lineItem: Letter
                      quantity: 22
                      specificationId: da0b1495-c7cb-468c-9d81-07dee089d728
                      stockRemaining: 2000
                      timestamp: 2023-11-17T14:27:51.413Z
                    type: ManagementInformation
            schema:
              $ref: "#/components/schemas/createMI_request"
        required: true
      responses:
        "201":
          content:
            application/vnd.api+json:
              examples:
                create-mi-response:
                  value:
                    data:
                      attributes:
                        cost: 10.25
                        lineItem: Letter
                        quantity: 22
                        specificationId: da0b1495-c7cb-468c-9d81-07dee089d728
                        stockRemaining: 2000
                        timestamp: 2023-11-17T14:27:51.413Z
                      id: 2WL5eYSWGzCHlGmzNxuqVusPxDg
                      type: ManagementInformation
              schema:
                $ref: "#/components/schemas/createMI_201_response"
          description: Management Information created successfully
        "404":
          content:
            application/vnd.api+json:
              examples:
                error-not-found:
                  value:
                    errors:
                    - code: NOTIFY_RESOURCE_NOT_FOUND
                      detail: No resource found with that ID
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "404"
                      title: Resource not found
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: Resource not found
        "429":
          content:
            application/vnd.api+json:
              examples:
                error-too-many-requests:
                  value:
                    errors:
                    - code: NOTIFY_QUOTA
                      detail: You have made too many requests. Please try again later.
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "429"
                      title: Too many requests
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: Too many requests
        "500":
          content:
            application/vnd.api+json:
              examples:
                error-server-error:
                  value:
                    errors:
                    - code: NOTIFY_INTERNAL_SERVER_ERROR
                      detail: "An unexpected error occurred, please contact support"
                      id: rrt-1931948104716186917-c-geu2-10664-3111479-3.0
                      links:
                        about: https://digital.nhs.uk/developer/api-catalogue/nhs-notify-supplier
                      status: "500"
                      title: Internal Server Error
              schema:
                $ref: "#/components/schemas/listLetters_404_response"
          description: Server error
      summary: Create a new MI record
      tags:
      - mi
      x-eov-operation-handler: controllers/MiController
  /_status:
    get:
      description: Returns 200 OK if the service is up.
      operationId: getStatus
      responses:
        "200":
          description: Service is healthy
      summary: Health check endpoint
      x-eov-operation-handler: controllers/DefaultController
components:
  schemas:
    createMI_request_data:
      properties:
        type:
          enum:
          - ManagementInformation
          type: string
        attributes:
          $ref: "#/components/schemas/createMI_request_data_attributes"
      type: object
    listLetters_200_response_data_inner_attributes:
      properties:
        specificationId:
          example: 2WL5eYSWGzCHlGmzNxuqVusPxDg
          type: string
        status:
          default: PENDING
          description: The supplier status of an individual letter
          enum:
          - PENDING
          - ACCEPTED
          - REJECTED
          - PRINTED
          - ENCLOSED
          - CANCELLED
          - DISPATCHED
          - DELIVERED
          - FAILED
          - RETURNED
          - DESTROYED
          - FORWARDED
          example: PENDING
          type: string
        reasonCode:
          description: Reason code for the given status
          example: 100
          type: number
        reasonText:
          description: Reason text for the given status
          example: failed validation
          type: string
      required:
      - specificationId
      - status
      type: object
    listLetters_404_response:
      properties:
        data:
          $ref: "#/components/schemas/listLetters_404_response_data"
      type: object
    patchLetters_request:
      properties:
        data:
          $ref: "#/components/schemas/postLetters_request_data_inner"
      type: object
    createMI_201_response_data_attributes:
      properties:
        messageReference:
          example: da0b1495-c7cb-468c-9d81-07dee089d728
          type: string
        timestamp:
          example: 2023-11-17T14:27:51.413Z
          format: date-time
          type: string
        lineItem:
          example: Letter
          type: string
        quantity:
          example: 22
          type: number
        cost:
          description: Total Amount
          example: 10.25
          type: number
        stockRemaining:
          description: Stock remaining for this line item
          example: 20000
          type: number
      type: object
    listLetters_404_response_data:
      properties:
        errors:
          items:
            $ref: "#/components/schemas/listLetters_404_response_data_errors_inner"
          type: array
      type: object
    listLetters_404_response_data_errors_inner_links:
      properties:
        about:
          format: uri
          type: string
      type: object
    createMI_201_response:
      properties:
        data:
          $ref: "#/components/schemas/createMI_201_response_data"
      type: object
    listLetters_200_response:
      properties:
        data:
          items:
            $ref: "#/components/schemas/listLetters_200_response_data_inner"
          type: array
      type: object
    getLetterStatus_200_response:
      properties:
        data:
          $ref: "#/components/schemas/listLetters_200_response_data_inner"
      type: object
    postLetters_request_data_inner_attributes:
      properties:
        specificationId:
          example: 2WL5eYSWGzCHlGmzNxuqVusPxDg
          type: string
        status:
          default: PENDING
          description: The supplier status of an individual letter
          enum:
          - PENDING
          - ACCEPTED
          - REJECTED
          - PRINTED
          - ENCLOSED
          - CANCELLED
          - DISPATCHED
          - DELIVERED
          - FAILED
          - RETURNED
          - DESTROYED
          - FORWARDED
          example: PENDING
          type: string
        reasonCode:
          description: Reason code for the given status
          example: 100
          type: number
        reasonText:
          description: Reason text for the given status
          example: failed validation
          type: string
      type: object
    listLetters_200_response_data_inner:
      properties:
        type:
          enum:
          - Letter
          type: string
        id:
          example: 2WL5eYSWGzCHlGmzNxuqVusPxDg
          type: string
        attributes:
          $ref: "#/components/schemas/listLetters_200_response_data_inner_attributes"
      type: object
    postLetters_request_data_inner:
      properties:
        type:
          enum:
          - Letter
          type: string
        id:
          example: 2WL5eYSWGzCHlGmzNxuqVusPxDg
          type: string
        attributes:
          $ref: "#/components/schemas/postLetters_request_data_inner_attributes"
      type: object
    postLetters_request:
      properties:
        data:
          items:
            $ref: "#/components/schemas/postLetters_request_data_inner"
          type: array
      type: object
    createMI_request:
      properties:
        data:
          $ref: "#/components/schemas/createMI_request_data"
      type: object
    createMI_201_response_data:
      properties:
        type:
          enum:
          - ManagementInformation
          type: string
        id:
          example: 2WL5eYSWGzCHlGmzNxuqVusPxDg
          type: string
        attributes:
          $ref: "#/components/schemas/createMI_201_response_data_attributes"
      type: object
    listLetters_404_response_data_errors_inner:
      properties:
        id:
          type: string
        code:
          enum:
          - NOTIFY_INTERNAL_SERVER_ERROR
          - NOTIFY_INVALID_REQUEST
          - NOTIFY_LETTER_NOT_FOUND
          type: string
        links:
          $ref: "#/components/schemas/listLetters_404_response_data_errors_inner_links"
        status:
          type: string
        title:
          type: string
        detail:
          type: string
      type: object
    createMI_request_data_attributes:
      properties:
        specificationId:
          example: da0b1495-c7cb-468c-9d81-07dee089d728
          type: string
        timestamp:
          example: 2023-11-17T14:27:51.413Z
          format: date-time
          type: string
        lineItem:
          example: Letter
          type: string
        quantity:
          example: 22
          type: number
        cost:
          description: Total Amount
          example: 10.25
          type: number
        stockRemaining:
          description: Stock remaining for this line item
          example: 20000
          type: number
      type: object
  securitySchemes:
    app-level3:
      description: |
        # Application level 3 authentication

        This is an application-restricted authentication pattern for access
        to NHS England APIs.  For a full description of our authentication
        and authorization patterns please see the [Security and authorisation page](https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation).
      flows:
        clientCredentials:
          scopes: {}
          tokenUrl: /oauth2/token
      type: oauth2
    app-level0:
      description: |
        # Application level 0 authentication

        This is an application-restricted authentication pattern for access
        to NHS England APIs.  For a full description of our authentication
        and authorization patterns please see the [Security and authorisation page](https://digital.nhs.uk/developer/guides-and-documentation/security-and-authorisation).
      in: header
      name: apikey
      type: apiKey
x-nhsd-apim:
  temporary: true
  monitoring: false
  access: []
  target:
    type: hosted
    healthcheck: /_status
    containers:
    - name: nhs-notify-supplier
      image:
        name: nhs-notify-supplier
        tag: latest
      environment:
        LOG_LEVEL: info
        NODE_ENV: development
  target-attributes:
  - name: NHSD-Supplier-ID
    header: NHSD-Supplier-ID
    required: false
