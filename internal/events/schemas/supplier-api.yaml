---
asyncapi: '3.0.0'
info:
  title: NHS Notify Supplier API Events
  version: 1.x
  description: Events generated by the supplier-api bounded context
defaultContentType: application/json

channels:
  data-plane:
    title: Data Plane
    description: Events relating to message delivery
    messages:
      letter-accepted:
        $ref: '#/components/messages/letter-accepted'
      letter-cancelled:
        $ref: '#/components/messages/letter-cancelled'
      letter-delivered:
        $ref: '#/components/messages/letter-delivered'
      letter-dispatched:
        $ref: '#/components/messages/letter-dispatched'
      letter-enclosed:
        $ref: '#/components/messages/letter-enclosed'
      letter-failed:
        $ref: '#/components/messages/letter-failed'
      letter-forwarded:
        $ref: '#/components/messages/letter-forwarded'
      letter-pending:
        $ref: '#/components/messages/letter-pending'
      letter-printed:
        $ref: '#/components/messages/letter-printed'
      letter-rejected:
        $ref: '#/components/messages/letter-rejected'
      letter-returned:
        $ref: '#/components/messages/letter-returned'
      letter-any:
        $ref: '#/components/messages/letter-any'

components:
  messages:
    letter-accepted:
      name: letter-accepted
      title: Letter Status Accepted
      summary: |
        A letter status has been updated to accepted.

        This indicates that a letter has been accepted for processing by a supplier.
      contentType: application/json
      payload:
        $ref: './events/letter.ACCEPTED.schema.json'
      examples:
        - payload:
            $ref: './examples/letter.ACCEPTED.json'

    letter-cancelled:
      name: letter-cancelled
      title: Letter Status Cancelled
      summary: |
        A letter status has been updated to cancelled.

        This indicates that a letter has been cancelled and will not be printed or dispatched.
      contentType: application/json
      payload:
        $ref: './events/letter.CANCELLED.schema.json'

    letter-delivered:
      name: letter-delivered
      title: Letter Status Delivered
      summary: |
        A letter status has been updated to delivered.

        This indicates that a letter has been delivered to the recipient.
      contentType: application/json
      payload:
        $ref: './events/letter.DELIVERED.schema.json'

    letter-dispatched:
      name: letter-dispatched
      title: Letter Status Dispatched
      summary: |
        A letter status has been updated to dispatched.

        This indicates that a letter has been dispatched from the supplier to a down-stream access (DSA) provider.
      contentType: application/json
      payload:
        $ref: './events/letter.DISPATCHED.schema.json'

    letter-enclosed:
      name: letter-enclosed
      title: Letter Status Enclosed
      summary: |
        A letter status has been updated to enclosed.

        This indicates that a letter has been printed and packaged in an envelope.
      contentType: application/json
      payload:
        $ref: './events/letter.ENCLOSED.schema.json'

    letter-failed:
      name: letter-failed
      title: Letter Status Failed
      summary: |
        A letter status has been updated to failed.

        This indicates that a letter has failed to be processed by a supplier.
      contentType: application/json
      payload:
        $ref: './events/letter.FAILED.schema.json'

    letter-forwarded:
      name: letter-forwarded
      title: Letter Status Forwarded
      summary: |
        A letter status has been updated to forwarded.

        This indicates that a letter has been forwarded to another supplier for processing.
      contentType: application/json
      payload:
        $ref: './events/letter.FORWARDED.schema.json'
      examples:
        - payload:
            $ref: './examples/letter.FORWARDED.json'

    letter-pending:
      name: letter-pending
      title: Letter Status Pending
      summary: |
        A letter status has been updated to pending.

        This indicates that a letter has been queued for processing by a supplier.
      contentType: application/json
      payload:
        $ref: './events/letter.PENDING.schema.json'

    letter-printed:
      name: letter-printed
      title: Letter Status Printed
      summary: |
        A letter status has been updated to printed.

        This indicates that a letter has been printed by the supplier.
      contentType: application/json
      payload:
        $ref: './events/letter.PRINTED.schema.json'

    letter-rejected:
      name: letter-rejected
      title: Letter Status Rejected
      summary: |
        A letter status has been updated to rejected.

        This indicates that a letter has been rejected by the supplier and will not be processed.
      contentType: application/json
      payload:
        $ref: './events/letter.REJECTED.schema.json'

    letter-returned:
      name: letter-returned
      title: Letter Status Returned
      summary: |
        A letter status has been updated to returned.

        This indicates that a letter has been returned to the supplier.
      contentType: application/json
      payload:
        $ref: './events/letter.RETURNED.schema.json'
      examples:
        - payload:
            $ref: './examples/letter.RETURNED.json'

    letter-any:
      name: letter-any
      title: Letter Status Changed
      summary: |
        A letter status has been updated.

        This is a generic schema which matches any status change.
      contentType: application/json
      payload:
        $ref: './events/letter.any.schema.json'

  schemas:
    letter:
      $ref: './domain/letter.schema.json'
