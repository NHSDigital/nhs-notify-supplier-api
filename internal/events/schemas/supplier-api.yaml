---
asyncapi: '3.0.0'
info:
  title: NHS Notify Supplier API Events
  version: 1.x
  description: Events generated by the supplier-api bounded context
defaultContentType: application/json

channels:
  data-plane:
    title: Data Plane
    description: Events relating to message delivery
    messages:
      letter-status-accepted:
        $ref: '#/components/messages/letter-status-accepted'
      letter-status-cancelled:
        $ref: '#/components/messages/letter-status-cancelled'
      letter-status-delivered:
        $ref: '#/components/messages/letter-status-delivered'
      letter-status-dispatched:
        $ref: '#/components/messages/letter-status-dispatched'
      letter-status-enclosed:
        $ref: '#/components/messages/letter-status-enclosed'
      letter-status-failed:
        $ref: '#/components/messages/letter-status-failed'
      letter-status-forwarded:
        $ref: '#/components/messages/letter-status-forwarded'
      letter-status-pending:
        $ref: '#/components/messages/letter-status-pending'
      letter-status-printed:
        $ref: '#/components/messages/letter-status-printed'
      letter-status-rejected:
        $ref: '#/components/messages/letter-status-rejected'
      letter-status-returned:
        $ref: '#/components/messages/letter-status-returned'

components:
  messages:
    letter-status-accepted:
      name: letter-status-accepted
      title: Letter Status Accepted
      summary: |
        A letter status has been updated to accepted.

        This indicates that a letter has been accepted for processing by a supplier.
      contentType: application/json
      payload:
        $ref: './events/letter-status.ACCEPTED.schema.json'

    letter-status-cancelled:
      name: letter-status-cancelled
      title: Letter Status Cancelled
      summary: |
        A letter status has been updated to cancelled.

        This indicates that a letter has been cancelled and will not be printed or dispatched.
      contentType: application/json
      payload:
        $ref: './events/letter-status.CANCELLED.schema.json'

    letter-status-delivered:
      name: letter-status-delivered
      title: Letter Status Delivered
      summary: |
        A letter status has been updated to delivered.

        This indicates that a letter has been delivered to the recipient.
      contentType: application/json
      payload:
        $ref: './events/letter-status.DELIVERED.schema.json'

    letter-status-dispatched:
      name: letter-status-dispatched
      title: Letter Status Dispatched
      summary: |
        A letter status has been updated to dispatched.

        This indicates that a letter has been dispatched from the supplier to a down-stream access (DSA) provider.
      contentType: application/json
      payload:
        $ref: './events/letter-status.DISPATCHED.schema.json'
      examples:
        - payload:
            $ref: './examples/letter-status.DISPATCHED.json'

    letter-status-enclosed:
      name: letter-status-enclosed
      title: Letter Status Enclosed
      summary: |
        A letter status has been updated to enclosed.

        This indicates that a letter has been printed and packaged in an envelope.
      contentType: application/json
      payload:
        $ref: './events/letter-status.ENCLOSED.schema.json'

    letter-status-failed:
      name: letter-status-failed
      title: Letter Status Failed
      summary: |
        A letter status has been updated to failed.

        This indicates that a letter has failed to be processed by a supplier.
      contentType: application/json
      payload:
        $ref: './events/letter-status.FAILED.schema.json'

    letter-status-forwarded:
      name: letter-status-forwarded
      title: Letter Status Forwarded
      summary: |
        A letter status has been updated to forwarded.

        This indicates that a letter has been forwarded to another supplier for processing.
      contentType: application/json
      payload:
        $ref: './events/letter-status.FORWARDED.schema.json'

    letter-status-pending:
      name: letter-status-pending
      title: Letter Status Pending
      summary: |
        A letter status has been updated to pending.

        This indicates that a letter has been queued for processing by a supplier.
      contentType: application/json
      payload:
        $ref: './events/letter-status.PENDING.schema.json'

    letter-status-printed:
      name: letter-status-printed
      title: Letter Status Printed
      summary: |
        A letter status has been updated to printed.

        This indicates that a letter has been printed by the supplier.
      contentType: application/json
      payload:
        $ref: './events/letter-status.PRINTED.schema.json'

    letter-status-rejected:
      name: letter-status-rejected
      title: Letter Status Rejected
      summary: |
        A letter status has been updated to rejected.

        This indicates that a letter has been rejected by the supplier and will not be processed.
      contentType: application/json
      payload:
        $ref: './events/letter-status.REJECTED.schema.json'

    letter-status-returned:
      name: letter-status-returned
      title: Letter Status Returned
      summary: |
        A letter status has been updated to returned.

        This indicates that a letter has been returned to the supplier.
      contentType: application/json
      payload:
        $ref: './events/letter-status.RETURNED.schema.json'
